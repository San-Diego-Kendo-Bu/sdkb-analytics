<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Callback</title>
</head>
<body>
  <p>Processing login...</p>

  <script type="module">
    // If callback.html lives at /components/callback.html, make sure this path is correct:
    // Using an absolute path avoids ../ mistakes:
    import { userManager } from "/js/cognitoManager.js";

    (async () => {
      try {

        const user = await userManager.signinRedirectCallback();

        // send them to your app home
        window.location.replace("/index.html");
      } catch (err) {
        console.error("Signin redirect callback error:", err);

        // Surface OIDC errors from the URL (helps when Cognito sends error params)
        const p = new URLSearchParams(location.search);
        if (p.get("error")) {
          console.error("OIDC error:", p.get("error"), p.get("error_description"));
        }
        document.body.textContent = "Login failed. Check console for details.";
      }
    })();
  </script>
</body>
</html>
